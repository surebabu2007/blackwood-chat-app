(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[167],{9150:function(e,t,a){Promise.resolve().then(a.bind(a,819))},819:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return V}});var s=a(7437),r=a(2265),l=a(9487),i=a(8266),n=a(429),c=a(5095),o=a(9763);let d=(0,o.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),m=(0,o.Z)("Gavel",[["path",{d:"m14 13-7.5 7.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L11 10",key:"c9cbz0"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]),x=(0,o.Z)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var h=a(2489);let u=(0,o.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),b=(0,o.Z)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),g=(0,o.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),p=(0,o.Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);var v=a(4743);let y=e=>{let{character:t,isMinimized:a=!1,onMinimize:l,onMaximize:o,onClose:y,className:f="",position:j="bottom-right",theme:w="sepia",showHeader:N=!0,enableVoice:k=!1,enableFileUpload:C=!1,maxHeight:S="500px",width:D="400px",isInterrogationMode:M=!1}=e,[E,z]=(0,r.useState)(!a),[T,Z]=(0,r.useState)(""),[I,U]=(0,r.useState)(!1),[L,V]=(0,r.useState)(!1),{currentCharacter:H,messages:R,isTyping:A,isLoading:F,error:W,sendMessage:P,selectCharacter:O,clearError:_}=(0,i.R)();(0,r.useEffect)(()=>{t&&t.id!==(null==H?void 0:H.id)&&O(t)},[t,null==H?void 0:H.id,O]);let q=()=>{T.trim()&&(P(T.trim()),Z(""))},B=()=>{z(!E),E?null==l||l():null==o||o()},K=(()=>{let e;switch(w){case"sepia":default:e={container:"bg-amber-50 border-amber-300 shadow-amber-900/30",header:"bg-gradient-to-r from-amber-100 to-amber-200 border-amber-400",input:"bg-amber-100 border-amber-400 focus:border-amber-600 text-amber-900",message:"bg-amber-200 border-amber-300 text-amber-900",messageUser:"bg-gradient-to-r from-amber-700 to-amber-800 border-amber-800 text-white",button:"bg-amber-700 hover:bg-amber-800 text-white shadow-lg",text:"text-amber-900",accent:"text-amber-800"};break;case"aged":e={container:"bg-yellow-50 border-yellow-400 shadow-yellow-900/30",header:"bg-gradient-to-r from-yellow-100 to-yellow-200 border-yellow-500",input:"bg-yellow-100 border-yellow-500 focus:border-yellow-700 text-yellow-900",message:"bg-yellow-200 border-yellow-400 text-yellow-900",messageUser:"bg-gradient-to-r from-yellow-800 to-yellow-900 border-yellow-900 text-white",button:"bg-yellow-800 hover:bg-yellow-900 text-white shadow-lg",text:"text-yellow-900",accent:"text-yellow-800"};break;case"classic":e={container:"bg-gray-100 border-gray-400 shadow-gray-900/30",header:"bg-gradient-to-r from-gray-200 to-gray-300 border-gray-500",input:"bg-gray-200 border-gray-500 focus:border-gray-700 text-gray-900",message:"bg-gray-300 border-gray-400 text-gray-900",messageUser:"bg-gradient-to-r from-gray-700 to-gray-800 border-gray-800 text-white",button:"bg-gray-800 hover:bg-gray-900 text-white shadow-lg",text:"text-gray-900",accent:"text-gray-800"}}return M&&(e.container="".concat(e.container," border-red-600 ring-2 ring-red-400/50 shadow-red-900/40 interrogation-mode-container"),e.header="bg-gradient-to-r from-red-800 to-red-900 border-red-700 text-white",e.input="bg-red-50 border-red-500 focus:border-red-700 text-red-900",e.message="vintage-message-character-interrogation",e.messageUser="vintage-message-user-interrogation",e.button="bg-red-700 hover:bg-red-800 text-white shadow-lg",e.text="text-red-900",e.accent="text-red-700"),e})(),G=(()=>{switch(j){case"bottom-right":default:return"fixed bottom-4 right-4";case"bottom-left":return"fixed bottom-4 left-4";case"top-right":return"fixed top-4 right-4";case"top-left":return"fixed top-4 left-4"}})();return E?(0,s.jsx)(n.E.div,{initial:{scale:0,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:0,opacity:0,y:20},className:"".concat(G," z-50"),style:{width:D,maxHeight:S},children:(0,s.jsxs)("div",{className:"".concat(K.container," ").concat(K.text," border-2 rounded-lg shadow-xl vintage-paper"),children:[N&&(0,s.jsx)("div",{className:"".concat(K.header," border-b-2 p-3 rounded-t-lg"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"w-8 h-8 rounded-full overflow-hidden border-2 border-current",children:[(0,s.jsx)("img",{src:(null==H?void 0:H.avatar)||"/images/characters/default.png",alt:(null==H?void 0:H.name)||"Detective",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.nextElementSibling;t&&(t.style.display="flex")}}),(0,s.jsx)("div",{className:"w-full h-full bg-current flex items-center justify-center text-xs",children:"\uD83D\uDD0D"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"detective-title text-sm",children:(null==H?void 0:H.name)||"Detective Chat"}),(0,s.jsx)("p",{className:"detective-caption opacity-75",children:(null==H?void 0:H.role)||"Investigation Assistant"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[M&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center space-x-1 px-2 py-1 rounded-full bg-red-100 border border-red-300 text-red-700 text-xs font-bold detective-label uppercase",children:[(0,s.jsx)(m,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:"Interrogation Mode"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("button",{onClick:B,className:"".concat(K.button," p-1 rounded hover:opacity-80 transition-opacity"),children:(0,s.jsx)(x,{className:"w-4 h-4"})}),y&&(0,s.jsx)("button",{onClick:y,className:"".concat(K.button," p-1 rounded hover:opacity-80 transition-opacity"),children:(0,s.jsx)(h.Z,{className:"w-4 h-4"})})]})]})]})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",style:{maxHeight:"calc(".concat(S," - 120px)")},children:[0===R.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDD0D"}),(0,s.jsx)("h4",{className:"detective-title mb-2",children:"Investigation Ready"}),(0,s.jsx)("p",{className:"detective-body opacity-75",children:"Begin your investigation by asking questions about the case."})]}):(0,s.jsx)(c.M,{children:R.map(e=>(0,s.jsx)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"".concat("user"===e.type?K.messageUser:K.message," p-3 rounded-lg border ").concat("user"===e.type?"ml-8":"mr-8"),children:(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:["user"===e.type?(0,s.jsxs)("div",{className:"w-6 h-6 rounded-full overflow-hidden border-2 border-white flex-shrink-0 shadow-md",children:[(0,s.jsx)("img",{src:"/images/characters/detective.png",alt:"Detective",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.nextElementSibling;t&&(t.style.display="flex")}}),(0,s.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-amber-600 to-amber-800 flex items-center justify-center text-white text-xs font-bold",children:"\uD83D\uDD75️"})]}):(0,s.jsxs)("div",{className:"w-6 h-6 rounded-full overflow-hidden border border-current flex-shrink-0",children:[(0,s.jsx)("img",{src:(null==H?void 0:H.avatar)||"/images/characters/default.png",alt:(null==H?void 0:H.name)||"Character",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.nextElementSibling;t&&(t.style.display="flex")}}),(0,s.jsx)("div",{className:"w-full h-full bg-current flex items-center justify-center text-xs",children:"\uD83D\uDC64"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"detective-body text-sm leading-relaxed",children:e.content}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,s.jsx)(u,{className:"w-3 h-3 opacity-50"}),(0,s.jsx)("span",{className:"detective-caption opacity-50",children:new Date(e.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]})]})]})},e.id))}),A&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"".concat(K.message," p-3 rounded-lg border mr-8"),children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded-full overflow-hidden border border-current flex-shrink-0",children:(0,s.jsx)("img",{src:(null==H?void 0:H.avatar)||"/images/characters/default.png",alt:(null==H?void 0:H.name)||"Character",className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsxs)("span",{className:"detective-body text-sm opacity-75",children:[(null==H?void 0:H.name)||"Character"," is typing"]}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})]})})]}),(0,s.jsx)("div",{className:"".concat(K.header," border-t-2 p-3 rounded-b-lg"),children:(0,s.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("textarea",{value:T,onChange:e=>Z(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),q())},placeholder:M?"Press for information...":"Ask about the case...",className:"".concat(K.input," w-full p-3 border-2 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-opacity-50 text-sm detective-body shadow-inner placeholder-opacity-70"),rows:1,style:{minHeight:"44px",maxHeight:"120px"},onInput:e=>{e.currentTarget.style.height="auto",e.currentTarget.style.height=e.currentTarget.scrollHeight+"px"}})}),(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[k&&(0,s.jsx)("button",{onClick:()=>U(!I),className:"".concat(K.button," p-2 rounded hover:opacity-80 transition-opacity ").concat(I?"bg-red-600 hover:bg-red-700":""),children:I?(0,s.jsx)(b,{className:"w-4 h-4"}):(0,s.jsx)(g,{className:"w-4 h-4"})}),C&&(0,s.jsx)("button",{className:"".concat(K.button," p-2 rounded hover:opacity-80 transition-opacity"),children:(0,s.jsx)(p,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:q,disabled:!T.trim()||F,className:"".concat(K.button," p-2 rounded hover:opacity-80 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed"),children:(0,s.jsx)(v.Z,{className:"w-4 h-4"})})]})]})})]})}):(0,s.jsx)(n.E.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},className:"".concat(G," z-50"),children:(0,s.jsx)("div",{className:"".concat(K.container," ").concat(K.text," border-2 rounded-lg shadow-lg cursor-pointer hover:shadow-xl transition-all duration-300 vintage-paper"),onClick:B,children:(0,s.jsxs)("div",{className:"p-3 flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-current",children:[(0,s.jsx)("img",{src:(null==H?void 0:H.avatar)||"/images/characters/default.png",alt:(null==H?void 0:H.name)||"Detective",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.nextElementSibling;t&&(t.style.display="flex")}}),(0,s.jsx)("div",{className:"w-full h-full bg-current flex items-center justify-center text-xs",children:"\uD83D\uDD0D"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"detective-title text-sm",children:(null==H?void 0:H.name)||"Detective Chat"}),(0,s.jsx)("p",{className:"detective-caption opacity-75",children:R.length>0?"Click to continue...":"Click to start investigation"})]}),(0,s.jsx)(d,{className:"w-5 h-5"})]})})})},f=(0,o.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),j=(0,o.Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),w=(0,o.Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var N=a(2252),k=a(2369);let C=e=>{let{character:t,onClose:a,position:l="bottom-right",size:i="medium",showStatus:c=!0,enableNotifications:o=!0}=e,[m,x]=(0,r.useState)(!1),[h,b]=(0,r.useState)(!0),[g,p]=(0,r.useState)(new Date),[v,C]=(0,r.useState)(0),[S,D]=(0,r.useState)(!1),M=(()=>{switch(l){case"bottom-right":default:return"fixed bottom-4 right-4";case"bottom-left":return"fixed bottom-4 left-4";case"top-right":return"fixed top-4 right-4";case"top-left":return"fixed top-4 left-4"}})(),E=(()=>{switch(i){case"small":return{width:"320px",height:"400px"};case"medium":default:return{width:"400px",height:"500px"};case"large":return{width:"480px",height:"600px"}}})(),z=(()=>{switch(t.color){case"james":case"lily":default:return"sepia";case"marcus":case"thompson":return"aged";case"elena":return"classic"}})(),T=(()=>{switch(t.color){case"james":return"from-yellow-400 to-yellow-600";case"marcus":return"from-blue-400 to-blue-600";case"elena":return"from-red-400 to-red-600";case"lily":return"from-green-400 to-green-600";case"thompson":return"from-gray-400 to-gray-600";default:return"from-amber-400 to-amber-600"}})();return m?(0,s.jsx)(n.E.div,{initial:{scale:0,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:0,opacity:0,y:20},className:"".concat(M," z-50"),style:E,children:(0,s.jsx)(y,{character:t,isMinimized:!1,onMinimize:()=>x(!1),onClose:a,position:l,theme:z,showHeader:!0,enableVoice:!0,enableFileUpload:!1,maxHeight:E.height,width:E.width,className:"vintage-character-widget"})}):(0,s.jsx)(n.E.div,{initial:{scale:0,opacity:0,rotate:-10},animate:{scale:1,opacity:1,rotate:0},className:"".concat(M," z-50"),children:(0,s.jsxs)("div",{className:"relative cursor-pointer group",onClick:()=>x(!0),children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 border-2 border-amber-300 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 vintage-paper transform hover:scale-105",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"w-12 h-12 rounded-full overflow-hidden border-3 border-amber-400 bg-gradient-to-br ".concat(T),children:[(0,s.jsx)("img",{src:t.avatar,alt:t.name,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.nextElementSibling;t&&(t.style.display="flex")}}),(0,s.jsx)("div",{className:"w-full h-full bg-current flex items-center justify-center text-white text-lg",children:t.name.charAt(0)})]}),c&&(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-amber-50 ".concat(h?"bg-green-500":"bg-gray-400")}),v>0&&(0,s.jsx)("div",{className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:v>9?"9+":v})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"detective-title text-amber-900 text-sm",children:t.name}),(0,s.jsx)("p",{className:"detective-caption text-amber-700 mb-1",children:t.role}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(()=>{switch(t.currentEmotionalState){case"defensive":return(0,s.jsx)(f,{className:"w-3 h-3 text-yellow-600"});case"aggressive":return(0,s.jsx)(j,{className:"w-3 h-3 text-red-600"});case"vulnerable":return(0,s.jsx)(w,{className:"w-3 h-3 text-pink-600"});case"manipulative":return(0,s.jsx)(N.Z,{className:"w-3 h-3 text-orange-600"});default:return(0,s.jsx)(k.Z,{className:"w-3 h-3 text-blue-600"})}})(),(0,s.jsxs)("span",{className:"text-xs font-medium ".concat(t.trustLevel>=70?"text-green-600":t.trustLevel>=40?"text-yellow-600":"text-red-600"),children:["Trust: ",t.trustLevel,"%"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(d,{className:"w-6 h-6 text-amber-700 group-hover:text-amber-800 transition-colors"}),S&&(0,s.jsxs)("div",{className:"flex space-x-1 mt-1",children:[(0,s.jsx)("div",{className:"w-1 h-1 bg-amber-600 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-1 h-1 bg-amber-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-1 h-1 bg-amber-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})]}),(0,s.jsx)("div",{className:"mt-3 pt-2 border-t border-amber-300",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1 text-amber-700",children:[(0,s.jsx)(u,{className:"w-3 h-3"}),(0,s.jsxs)("span",{children:["Last seen: ",g.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]}),(0,s.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("neutral"===t.currentEmotionalState?"bg-green-100 text-green-800":"defensive"===t.currentEmotionalState?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:t.currentEmotionalState})]})})]})}),(0,s.jsx)("div",{className:"absolute -top-2 -left-2 w-4 h-4 bg-amber-200 rounded-full opacity-50"}),(0,s.jsx)("div",{className:"absolute -bottom-2 -right-2 w-3 h-3 bg-amber-300 rounded-full opacity-30"})]})})};var S=a(5805);let D=(0,o.Z)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),M=(0,o.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),E=e=>{let{apiKey:t,agentId:a,position:i="bottom-right",theme:o="sepia",enableVoice:m=!0,enableFileUpload:h=!1,showCharacterSelector:u=!0,defaultCharacter:b,onCharacterSelect:g,onMessageSent:p,onMessageReceived:v,className:y=""}=e,[f,j]=(0,r.useState)({position:i,theme:o,enableVoice:m,enableFileUpload:h,showCharacterSelector:u,isMinimized:!1,selectedCharacter:b?l.R.find(e=>e.id===b):void 0}),[w,N]=(0,r.useState)(new Set),[k,E]=(0,r.useState)(!1),[T,Z]=(0,r.useState)(!0),[I,U]=(0,r.useState)(new Date),[L,V]=(0,r.useState)([]),[H,R]=(0,r.useState)(null);(0,r.useEffect)(()=>{t&&a&&A()},[t,a]);let A=async()=>{try{let e=await fetch("https://api.elevenlabs.io/v1/convai/agents/".concat(a,"/widget"),{headers:{"xi-api-key":t||"","Content-Type":"application/json"}});if(e.ok){let t=await e.json();R(t.widget_config)}}catch(e){console.error("Failed to load ElevenLabs configuration:",e)}},F=e=>{let t=new Set(w);t.delete(e),N(t)},W=e=>{j(t=>({...t,...e}))},P=e=>{W({selectedCharacter:e}),null==g||g(e),N(new Set([e.id]))},O=(()=>{switch(f.position){case"bottom-right":default:return"fixed bottom-4 right-4";case"bottom-left":return"fixed bottom-4 left-4";case"top-right":return"fixed top-4 right-4";case"top-left":return"fixed top-4 left-4"}})(),_=(()=>{switch(f.theme){case"sepia":default:return"bg-amber-50 border-amber-200 text-amber-900";case"aged":return"bg-yellow-50 border-yellow-300 text-yellow-900";case"classic":return"bg-gray-50 border-gray-300 text-gray-900"}})();return f.isMinimized?(0,s.jsx)(n.E.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},className:"".concat(O," z-50"),children:(0,s.jsx)("div",{className:"".concat(_," border-2 rounded-lg shadow-lg cursor-pointer hover:shadow-xl transition-all duration-300 vintage-paper"),onClick:()=>W({isMinimized:!1}),children:(0,s.jsxs)("div",{className:"p-4 flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center",children:(0,s.jsx)(S.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-serif font-semibold text-sm",children:"Detective Hub"}),(0,s.jsxs)("p",{className:"text-xs opacity-75",children:[w.size," active investigation",1!==w.size?"s":""]})]}),(0,s.jsx)(D,{className:"w-5 h-5"})]})})}):(0,s.jsxs)("div",{className:"".concat(O," z-50"),children:[(0,s.jsxs)(n.E.div,{initial:{scale:0,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},className:"".concat(_," border-2 rounded-lg shadow-xl vintage-paper"),style:{width:"420px",maxHeight:"600px"},children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-amber-100 to-amber-200 border-b-2 border-amber-300 p-3 rounded-t-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center",children:(0,s.jsx)(S.Z,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"detective-title text-amber-900",children:"Detective Investigation Hub"}),(0,s.jsx)("p",{className:"detective-caption text-amber-700",children:"Choose your suspect to interrogate"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("button",{onClick:()=>E(!k),className:"p-1 rounded hover:bg-amber-300 transition-colors",children:(0,s.jsx)(M,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>W({isMinimized:!0}),className:"p-1 rounded hover:bg-amber-300 transition-colors",children:(0,s.jsx)(x,{className:"w-4 h-4"})})]})]})}),f.showCharacterSelector&&(0,s.jsx)("div",{className:"p-4 max-h-96 overflow-y-auto",children:(0,s.jsx)("div",{className:"grid grid-cols-1 gap-3",children:l.R.map(e=>(0,s.jsx)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*l.R.indexOf(e)},className:"border-2 rounded-lg p-3 cursor-pointer transition-all duration-300 hover:shadow-md ".concat(w.has(e.id)?"border-amber-400 bg-amber-100":"border-amber-200 bg-white hover:border-amber-300"),onClick:()=>P(e),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-amber-400",children:[(0,s.jsx)("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.nextElementSibling;t&&(t.style.display="flex")}}),(0,s.jsx)("div",{className:"w-full h-full bg-amber-200 flex items-center justify-center text-amber-800 font-bold",children:e.name.charAt(0)})]}),(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white bg-green-500"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"detective-title text-amber-900",children:e.name}),z(e.currentEmotionalState)]}),(0,s.jsx)("p",{className:"detective-caption text-amber-700 mb-1",children:e.role}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("span",{className:"text-xs font-medium ".concat(e.trustLevel>=70?"text-green-600":e.trustLevel>=40?"text-yellow-600":"text-red-600"),children:["Trust: ",e.trustLevel,"%"]}),(0,s.jsxs)("span",{className:"text-xs text-amber-600",children:[e.revealedSecrets.length," secrets revealed"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(d,{className:"w-5 h-5 ".concat(w.has(e.id)?"text-amber-700":"text-amber-500")}),w.has(e.id)&&(0,s.jsx)("span",{className:"text-xs text-amber-700 mt-1",children:"Active"})]})]})},e.id))})}),(0,s.jsx)(c.M,{children:k&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-amber-200 p-4",children:[(0,s.jsx)("h4",{className:"font-serif font-semibold text-amber-900 mb-3",children:"Widget Settings"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-amber-700 mb-1 block",children:"Theme"}),(0,s.jsxs)("select",{value:f.theme,onChange:e=>W({theme:e.target.value}),className:"w-full p-2 border border-amber-300 rounded text-sm",children:[(0,s.jsx)("option",{value:"sepia",children:"Sepia"}),(0,s.jsx)("option",{value:"aged",children:"Aged"}),(0,s.jsx)("option",{value:"classic",children:"Classic"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs font-medium text-amber-700",children:"Voice Enabled"}),(0,s.jsx)("input",{type:"checkbox",checked:f.enableVoice,onChange:e=>W({enableVoice:e.target.checked}),className:"rounded"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs font-medium text-amber-700",children:"File Upload"}),(0,s.jsx)("input",{type:"checkbox",checked:f.enableFileUpload,onChange:e=>W({enableFileUpload:e.target.checked}),className:"rounded"})]})]})]})}),(0,s.jsx)("div",{className:"bg-amber-100 border-t border-amber-200 p-3 rounded-b-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-amber-700",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(T?"bg-green-500":"bg-red-500")}),(0,s.jsx)("span",{children:T?"Online":"Offline"})]}),(0,s.jsxs)("span",{children:["Last activity: ",I.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]})})]}),(0,s.jsx)(c.M,{children:Array.from(w).map(e=>{let t=l.R.find(t=>t.id===e);return t?(0,s.jsx)(C,{character:t,position:f.position,size:"medium",showStatus:!0,enableNotifications:!0,onClose:()=>F(e)},e):null})})]})},z=e=>{switch(e){case"defensive":return(0,s.jsx)(f,{className:"w-4 h-4 text-yellow-600"});case"aggressive":return(0,s.jsx)(j,{className:"w-4 h-4 text-red-600"});case"vulnerable":return(0,s.jsx)(w,{className:"w-4 h-4 text-pink-600"});case"manipulative":return(0,s.jsx)(N.Z,{className:"w-4 h-4 text-orange-600"});default:return(0,s.jsx)(k.Z,{className:"w-4 h-4 text-blue-600"})}},T=(0,o.Z)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Z=(0,o.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),I=(0,o.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),U=(0,o.Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),L=(0,o.Z)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);function V(){let[e,t]=(0,r.useState)(null),[a,i]=(0,r.useState)("unified"),[c,o]=(0,r.useState)("sepia"),[d,m]=(0,r.useState)("bottom-right"),[x,h]=(0,r.useState)(!1),[u,b]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1),v=e=>{navigator.clipboard.writeText(e),b(!0),setTimeout(()=>b(!1),2e3)},f=()=>{let e=window.location.origin;return'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Detective Chat Widget Integration</title>\n    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>\n    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>\n    <script src="https://unpkg.com/framer-motion@10/dist/framer-motion.js"></script>\n    <script src="'.concat(e,'/widget-bundle.js"></script>\n    <link href="').concat(e,'/widget-styles.css" rel="stylesheet">\n</head>\n<body>\n    <div id="detective-widget-root"></div>\n    \n    <script>\n        const { UnifiedDetectiveWidget } = DetectiveWidget;\n        \n        ReactDOM.render(\n            React.createElement(UnifiedDetectiveWidget, {\n                position: \'').concat(d,"',\n                theme: '").concat(c,"',\n                enableVoice: true,\n                enableFileUpload: false,\n                showCharacterSelector: true,\n                isInterrogationMode: ").concat(g,",\n                onCharacterSelect: (character) => {\n                    console.log('Character selected:', character.name);\n                },\n                onMessageSent: (message, characterId) => {\n                    console.log('Message sent:', message, 'to', characterId);\n                },\n                onMessageReceived: (message, characterId) => {\n                    console.log('Message received:', message, 'from', characterId);\n                }\n            }),\n            document.getElementById('detective-widget-root')\n        );\n    </script>\n</body>\n</html>")};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-yellow-50 to-amber-100",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-amber-200 to-yellow-200 border-b-2 border-amber-400 p-6",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-4xl detective-title text-amber-900 mb-2 vintage-text-shadow",children:"\uD83D\uDD75️ Detective Chat Widget Demo"}),(0,s.jsx)("p",{className:"detective-body text-amber-800 text-lg",children:"Vintage-themed chat widgets for your detective mystery games and web applications"})]})}),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border-2 border-amber-300 p-6 mb-8 vintage-paper",children:[(0,s.jsx)("h2",{className:"text-2xl detective-title text-amber-900 mb-6",children:"Widget Configuration"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block detective-label text-amber-700 mb-2",children:"Widget Type"}),(0,s.jsxs)("select",{value:a,onChange:e=>i(e.target.value),className:"w-full p-3 border-2 border-amber-300 rounded-lg vintage-input",children:[(0,s.jsx)("option",{value:"unified",children:"Unified Hub"}),(0,s.jsx)("option",{value:"individual",children:"Individual Character"}),(0,s.jsx)("option",{value:"single",children:"Single Chat"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block detective-label text-amber-700 mb-2",children:"Theme"}),(0,s.jsxs)("select",{value:c,onChange:e=>o(e.target.value),className:"w-full p-3 border-2 border-amber-300 rounded-lg vintage-input",children:[(0,s.jsx)("option",{value:"sepia",children:"Sepia"}),(0,s.jsx)("option",{value:"aged",children:"Aged Paper"}),(0,s.jsx)("option",{value:"classic",children:"Classic Detective"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block detective-label text-amber-700 mb-2",children:"Position"}),(0,s.jsxs)("select",{value:d,onChange:e=>m(e.target.value),className:"w-full p-3 border-2 border-amber-300 rounded-lg vintage-input",children:[(0,s.jsx)("option",{value:"bottom-right",children:"Bottom Right"}),(0,s.jsx)("option",{value:"bottom-left",children:"Bottom Left"}),(0,s.jsx)("option",{value:"top-right",children:"Top Right"}),(0,s.jsx)("option",{value:"top-left",children:"Top Left"})]})]}),"individual"===a&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block detective-label text-amber-700 mb-2",children:"Character"}),(0,s.jsxs)("select",{value:(null==e?void 0:e.id)||"",onChange:e=>{t(l.R.find(t=>t.id===e.target.value)||null)},className:"w-full p-3 border-2 border-amber-300 rounded-lg vintage-input",children:[(0,s.jsx)("option",{value:"",children:"Select Character"}),l.R.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,s.jsxs)("div",{className:"mb-6 p-4 border border-amber-300 rounded-lg bg-amber-50 shadow-inner",children:[(0,s.jsx)("label",{className:"block detective-label text-amber-700 mb-2",children:"Interrogation Mode"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"relative inline-flex h-6 w-11 items-center rounded-full cursor-pointer transition-colors duration-200 ease-in-out ".concat(g?"bg-red-600":"bg-gray-300"),onClick:()=>p(!g),children:[(0,s.jsx)("span",{className:"sr-only",children:"Enable Interrogation Mode"}),(0,s.jsx)(n.E.span,{className:"inline-block h-4 w-4 transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out ".concat(g?"translate-x-6":"translate-x-1")})]}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"detective-caption text-amber-600",children:g?"Interrogation Mode: Intense questioning mode active":"Standard Mode: Normal conversation"})})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 mt-6",children:[(0,s.jsxs)("button",{onClick:()=>h(!x),className:"vintage-button px-6 py-3 rounded-lg text-amber-900 font-medium flex items-center space-x-2",children:[(0,s.jsx)(T,{className:"w-5 h-5"}),(0,s.jsxs)("span",{children:[x?"Hide":"Show"," Integration Code"]})]}),(0,s.jsxs)("button",{onClick:()=>v(f()),className:"vintage-button px-6 py-3 rounded-lg text-amber-900 font-medium flex items-center space-x-2",children:[u?(0,s.jsx)(Z,{className:"w-5 h-5"}):(0,s.jsx)(I,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:u?"Copied!":"Copy Code"})]})]})]}),x&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-gray-900 rounded-lg shadow-lg border-2 border-amber-300 p-6 mb-8",children:[(0,s.jsx)("h3",{className:"text-xl font-serif font-bold text-amber-200 mb-4",children:"Integration Code"}),(0,s.jsx)("pre",{className:"text-green-400 text-sm overflow-x-auto",children:(0,s.jsx)("code",{children:f()})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border-2 border-amber-300 p-6 vintage-card",children:[(0,s.jsx)(M,{className:"w-8 h-8 text-amber-600 mb-3"}),(0,s.jsx)("h3",{className:"text-xl font-serif font-bold text-amber-900 mb-2",children:"Customizable"}),(0,s.jsx)("p",{className:"text-amber-700",children:"Fully customizable themes, positions, and character selection options"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border-2 border-amber-300 p-6 vintage-card",children:[(0,s.jsx)(U,{className:"w-8 h-8 text-amber-600 mb-3"}),(0,s.jsx)("h3",{className:"text-xl font-serif font-bold text-amber-900 mb-2",children:"Responsive"}),(0,s.jsx)("p",{className:"text-amber-700",children:"Works perfectly on desktop, tablet, and mobile devices"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border-2 border-amber-300 p-6 vintage-card",children:[(0,s.jsx)(L,{className:"w-8 h-8 text-amber-600 mb-3"}),(0,s.jsx)("h3",{className:"text-xl font-serif font-bold text-amber-900 mb-2",children:"Vintage Theme"}),(0,s.jsx)("p",{className:"text-amber-700",children:"Beautiful vintage detective aesthetic with sepia tones and aged paper effects"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border-2 border-amber-300 p-6 vintage-paper",children:[(0,s.jsx)("h2",{className:"text-2xl font-serif font-bold text-amber-900 mb-6",children:"Live Preview"}),(0,s.jsx)("div",{className:"relative h-96 bg-gradient-to-br from-amber-50 to-yellow-50 rounded-lg border-2 border-amber-200 p-4",children:(0,s.jsxs)("p",{className:"text-center text-amber-700 mt-32",children:["Widget will appear in the ",d," corner"]})})]})]}),"unified"===a&&(0,s.jsx)(E,{position:d,theme:c,enableVoice:!0,enableFileUpload:!1,showCharacterSelector:!0,onCharacterSelect:e=>{console.log("Character selected:",e.name)},onMessageSent:(e,t)=>{console.log("Message sent:",e,"to",t)},onMessageReceived:(e,t)=>{console.log("Message received:",e,"from",t)}}),"individual"===a&&e&&(0,s.jsx)(C,{character:e,position:d,size:"medium",showStatus:!0,enableNotifications:!0}),"single"===a&&(0,s.jsx)(y,{position:d,theme:c,showHeader:!0,enableVoice:!0,enableFileUpload:!1,maxHeight:"500px",width:"400px",isInterrogationMode:g})]})}}},function(e){e.O(0,[271,669,971,117,744],function(){return e(e.s=9150)}),_N_E=e.O()}]);