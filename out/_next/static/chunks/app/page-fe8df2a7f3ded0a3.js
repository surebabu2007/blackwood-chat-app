(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9240:function(e,t,s){Promise.resolve().then(s.bind(s,3075))},3075:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return q}});var a=s(7437),i=s(2265),r=s(9487),l=s(429);let n=e=>{let{character:t,isSelected:s,onClick:i,isAvailable:r=!0}=e;return(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},className:"\n        character-card relative p-4 rounded-lg border-2 cursor-pointer transition-all duration-300\n        ".concat({james:"border-james-500 bg-james-900/20 hover:bg-james-800/30",marcus:"border-marcus-500 bg-marcus-900/20 hover:bg-marcus-800/30",elena:"border-elena-500 bg-elena-900/20 hover:bg-elena-800/30",lily:"border-lily-500 bg-lily-900/20 hover:bg-lily-800/30",thompson:"border-thompson-500 bg-thompson-900/20 hover:bg-thompson-800/30",victoria:"border-victoria-500 bg-victoria-900/20 hover:bg-victoria-800/30"}[t.color],"\n        ").concat(s?"ring-2 ring-white/50 scale-105":"","\n        hover:scale-[1.02] hover:shadow-lg hover:border-white/30\n      "),onClick:i,children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,a.jsxs)("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-white/20 shadow-lg",children:[(0,a.jsx)("img",{src:t.avatar,alt:t.name,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.nextElementSibling;t&&(t.style.display="flex")}}),(0,a.jsx)("div",{className:"w-full h-full bg-gray-600 flex items-center justify-center text-xl",style:{display:"none"},children:t.avatar.includes("/images/")?"\uD83D\uDC64":t.avatar})]}),(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-blackwood-800"})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-white truncate",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-gray-300 truncate",children:t.role})]}),(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(s?"bg-blue-500":"bg-gray-500")})})]})})},c=e=>{let{characters:t,selectedCharacter:s,onCharacterSelect:i,investigationProgress:r}=e,c=e=>!0,o=e=>c(e)?e.id===(null==s?void 0:s.id)?"selected":"available":"locked";return(0,a.jsx)(l.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-blackwood-800/50 backdrop-blur-sm border-b border-gray-700 p-4",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Interview Suspects"}),(0,a.jsx)("div",{className:"text-xs text-gray-400 bg-gray-700/50 px-2 py-1 rounded-full",children:"All Available"})]}),(0,a.jsx)("div",{className:"space-y-3 px-2",children:t.map(e=>{let s=o(e);return c(e),(0,a.jsx)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*t.indexOf(e)},children:(0,a.jsx)(n,{character:e,isSelected:"selected"===s,onClick:()=>i(e),isAvailable:!0})},e.id)})}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-2",children:[(0,a.jsx)("span",{children:"Investigation Progress"}),(0,a.jsxs)("span",{children:[r,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)(l.E.div,{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full",initial:{width:0},animate:{width:"".concat(r,"%")},transition:{duration:.5}})})]})]})})};var o=s(2369),d=s(2252),x=s(9763);let h=(0,x.Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),m=e=>{let{message:t,characterName:s,characterAvatar:i}=e,r="user"===t.type,n="system"===t.type;return(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex ".concat(r?"justify-end":"justify-start"," mb-4"),children:(0,a.jsxs)("div",{className:"flex max-w-[80%] ".concat(r?"flex-row-reverse":"flex-row"," items-end space-x-2"),children:[!r&&!n&&(0,a.jsxs)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full overflow-hidden",children:[(0,a.jsx)("img",{src:i||"/images/characters/default.png",alt:s||"Character",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.nextElementSibling;t&&(t.style.display="flex")}}),(0,a.jsx)("div",{className:"w-full h-full bg-gray-600 flex items-center justify-center text-xs",style:{display:"none"},children:(null==i?void 0:i.includes("/images/"))?"\uD83D\uDC64":i||"\uD83D\uDC64"})]}),(0,a.jsxs)("div",{className:"flex flex-col ".concat(r?"items-end":"items-start"),children:[!r&&!n&&s&&(0,a.jsx)("span",{className:"text-xs text-gray-400 mb-1 px-2",children:s}),(0,a.jsxs)("div",{className:"\n              relative px-4 py-2 rounded-2xl shadow-lg\n              ".concat(r?"bg-blue-600 text-white":n?"bg-yellow-600 text-white":"bg-gray-700 text-white","\n              ").concat(r?"rounded-br-md":"rounded-bl-md","\n            "),children:[(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[n&&(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:r?(0,a.jsx)(o.Z,{className:"w-4 h-4"}):n?(0,a.jsx)(d.Z,{className:"w-4 h-4"}):(0,a.jsx)(h,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:t.content})})]}),t.emotionalTone&&!r&&(0,a.jsx)("div",{className:"mt-1 text-xs opacity-75",children:(0,a.jsxs)("span",{className:"italic",children:["(",t.emotionalTone,")"]})})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 mt-1 px-2",children:(e=>{try{let t=e instanceof Date?e:new Date(e);if(isNaN(t.getTime()))return"Just now";return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(t)}catch(e){return console.warn("Error formatting date:",e),"Just now"}})(t.timestamp)})]})]})})},y=e=>{let{messages:t,characterName:s,characterAvatar:r,isTyping:n}=e,c=(0,i.useRef)(null),o=()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};return(0,i.useEffect)(()=>{o()},[t,n]),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===t.length?(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center h-full text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Welcome to Blackwood Manor"}),(0,a.jsx)("p",{className:"text-gray-400 max-w-md",children:"Select a character to begin your investigation. Each character has their own secrets, motivations, and knowledge about the case."})]}):(0,a.jsxs)(a.Fragment,{children:[t.map((e,t)=>(0,a.jsx)(m,{message:e,characterName:s,characterAvatar:r},e.id)),n&&(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-start",children:(0,a.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,a.jsxs)("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:[(0,a.jsx)("img",{src:r||"/images/characters/default.png",alt:s||"Character",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.nextElementSibling;t&&(t.style.display="flex")}}),(0,a.jsx)("div",{className:"w-full h-full bg-gray-600 flex items-center justify-center text-xs",style:{display:"none"},children:(null==r?void 0:r.includes("/images/"))?"\uD83D\uDC64":r||"\uD83D\uDC64"})]}),(0,a.jsx)("div",{className:"bg-gray-700 text-white px-4 py-2 rounded-2xl rounded-bl-md",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-300",children:[s||"Character"," is typing"]}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})]})})]}),(0,a.jsx)("div",{ref:c})]})},g=(0,x.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var u=s(4743);let p=e=>{let{onSendMessage:t,isTyping:s,disabled:r=!1,placeholder:n="Ask a question...",characterName:c}=e,[o,d]=(0,i.useState)(""),x=(0,i.useRef)(null),h=e=>{e.preventDefault(),o.trim()&&!r&&!s&&o.length<=500&&(t(o.trim()),d(""))};return(0,i.useEffect)(()=>{x.current&&(x.current.style.height="auto",x.current.style.height="".concat(x.current.scrollHeight,"px"))},[o]),(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"sticky bottom-0 bg-blackwood-900/95 backdrop-blur-sm border-t border-gray-700 p-4",children:[(0,a.jsxs)("form",{onSubmit:h,className:"flex items-end space-x-3",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("textarea",{ref:x,value:o,onChange:e=>{let t=e.target.value;t.length<=500&&d(t)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h(e))},placeholder:n,disabled:r||s,"aria-label":"Type your message","aria-describedby":"message-help",className:"\n              chat-input w-full px-4 py-3 pr-12 bg-gray-800 border border-gray-600 rounded-2xl\n              text-white placeholder-gray-400 resize-none focus:outline-none focus:ring-2\n              focus:ring-blue-500 focus:border-transparent transition-all duration-200\n              max-h-32 min-h-[3rem]\n              ".concat(r?"opacity-50 cursor-not-allowed":"","\n              ").concat(s?"opacity-75":"","\n            "),rows:1,style:{minHeight:"3rem"}}),o.length>0&&(0,a.jsxs)("div",{className:"absolute bottom-1 right-14 text-xs text-gray-500",children:[o.length,"/500"]})]}),(0,a.jsx)(l.E.button,{type:"submit",disabled:!o.trim()||r||s,whileHover:{scale:1.05},whileTap:{scale:.95},className:"\n            flex items-center justify-center w-12 h-12 rounded-2xl transition-all duration-200\n            ".concat(!o.trim()||r||s?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white","\n          "),children:s?(0,a.jsx)(g,{className:"w-5 h-5 animate-spin"}):(0,a.jsx)(u.Z,{className:"w-5 h-5"})})]}),s&&(0,a.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center space-x-2 mt-2 text-sm text-gray-400",children:[(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,a.jsxs)("span",{children:[c||"Character"," is typing..."]})]})]})};var b=s(5438),v=s(5095);let j=(0,x.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),f=(0,x.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),N=(0,x.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),w=(0,x.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);var k=s(5805);let S=(0,x.Z)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),E=(0,x.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),C=(0,x.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),D=e=>{var t,s;let{investigationState:r,gameState:n,onAddNote:c,onUpdateProgress:d}=e,[x,h]=(0,i.useState)(!1),[m,y]=(0,i.useState)(""),[g,u]=(0,i.useState)(!1),p=()=>{m.trim()&&(c(m.trim()),y(""))};return(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-blackwood-800/50 backdrop-blur-sm border border-gray-700 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center",children:[(0,a.jsx)(j,{className:"w-5 h-5 mr-2"}),"Investigation Panel"]}),(0,a.jsx)("button",{onClick:()=>h(!x),className:"text-gray-400 hover:text-white transition-colors",children:x?(0,a.jsx)(f,{className:"w-5 h-5"}):(0,a.jsx)(N,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Case Progress"}),(0,a.jsxs)("span",{className:"text-sm font-medium ".concat((t=n.investigationProgress)<25?"text-red-400":t<50?"text-yellow-400":t<75?"text-blue-400":"text-green-400"),children:[n.investigationProgress,"% - ",(s=n.investigationProgress)<25?"Just Started":s<50?"Getting Clues":s<75?"Making Connections":"Almost There"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)(l.E.div,{className:"bg-gradient-to-r from-red-500 via-yellow-500 to-green-500 h-2 rounded-full",initial:{width:0},animate:{width:"".concat(n.investigationProgress,"%")},transition:{duration:.5}})})]}),(0,a.jsx)(v.M,{children:x&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-white mb-2 flex items-center",children:[(0,a.jsx)(w,{className:"w-4 h-4 mr-2"}),"Evidence Collected (",r.evidenceCollected.length,")"]}),(0,a.jsx)("div",{className:"space-y-1",children:r.evidenceCollected.length>0?r.evidenceCollected.map((e,t)=>(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-xs text-gray-300 bg-gray-700/50 rounded px-2 py-1",children:["• ",e]},t)):(0,a.jsx)("p",{className:"text-xs text-gray-500 italic",children:"No evidence collected yet"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-white mb-2 flex items-center",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 mr-2"}),"Suspects Interviewed (",r.suspectsInterviewed.length,")"]}),(0,a.jsx)("div",{className:"space-y-1",children:r.suspectsInterviewed.length>0?r.suspectsInterviewed.map((e,t)=>(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-xs text-gray-300 bg-gray-700/50 rounded px-2 py-1",children:["• ",e]},t)):(0,a.jsx)("p",{className:"text-xs text-gray-500 italic",children:"No suspects interviewed yet"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-white mb-2",children:"Relationship Scores"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(r.relationshipScores).length>0?Object.entries(r.relationshipScores).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-gray-300",children:t}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-16 bg-gray-700 rounded-full h-1",children:(0,a.jsx)("div",{className:"h-1 rounded-full ".concat(s>50?"bg-green-500":s>0?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(Math.abs(s),"%")}})}),(0,a.jsx)("span",{className:"text-xs text-gray-400 w-8",children:s})]})]},t)}):(0,a.jsx)("p",{className:"text-xs text-gray-500 italic",children:"No relationships established yet"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-white mb-2 flex items-center",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Victim Profile"]}),(0,a.jsxs)("div",{className:"space-y-2 text-xs text-gray-300",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Name:"})," ",b.A.name]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Age:"})," ",b.A.age," (at death)"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Occupation:"})," ",b.A.occupation]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Description:"})," ",b.A.description]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("strong",{children:"Known Secrets:"}),(0,a.jsx)("ul",{className:"list-disc list-inside ml-2 mt-1",children:b.A.secrets.slice(0,3).map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-white mb-2 flex items-center",children:[(0,a.jsx)(S,{className:"w-4 h-4 mr-2"}),"Investigation Notes (",r.investigationNotes.length,")"]}),(0,a.jsxs)("div",{className:"flex space-x-2 mb-2",children:[(0,a.jsx)("input",{type:"text",value:m,onChange:e=>y(e.target.value),placeholder:"Add investigation note...",className:"flex-1 text-xs bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyPress:e=>"Enter"===e.key&&p()}),(0,a.jsx)("button",{onClick:p,disabled:!m.trim(),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]}),(0,a.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:r.investigationNotes.length>0?r.investigationNotes.map((e,t)=>(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-xs text-gray-300 bg-gray-700/50 rounded px-2 py-1",children:["• ",e]},t)):(0,a.jsx)("p",{className:"text-xs text-gray-500 italic",children:"No notes yet"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-700",children:[(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Show spoilers"}),(0,a.jsx)("button",{onClick:()=>u(!g),className:"text-gray-400 hover:text-white transition-colors",children:g?(0,a.jsx)(E,{className:"w-4 h-4"}):(0,a.jsx)(C,{className:"w-4 h-4"})})]}),g&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"text-xs text-gray-400 bg-gray-900/50 rounded p-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"True Killer:"})," ",n.trueKiller||"Unknown"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Case Solved:"})," ",n.caseSolved?"Yes":"No"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Current Location:"})," ",n.currentLocation]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Time of Day:"})," ",n.timeOfDay]})]})]})})]})},M=(0,x.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),A=(0,x.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);class T extends i.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8 text-center",children:[(0,a.jsx)(M,{className:"w-16 h-16 text-red-500 mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6 max-w-md",children:"The chat system encountered an error. This might be due to a network issue or a temporary problem."}),(0,a.jsxs)("button",{onClick:this.handleRetry,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Try Again"})]}),!1]}):this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0})},this.state={hasError:!1}}}var Z=s(8266),P=s(2097);let z=(0,x.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),I=(0,x.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var R=s(2489);function q(){let[e,t]=(0,i.useState)(!1),[s,n]=(0,i.useState)(!1),{currentCharacter:o,messages:d,isTyping:x,isLoading:h,error:m,sendMessage:g,selectCharacter:u,clearError:b}=(0,Z.R)(),{investigationState:v,gameState:j,resetGame:f}=(0,P.a)();(0,i.useEffect)(()=>{j.gameStarted||P.a.getState().updateGameState({gameStarted:!0,trueKiller:r.R[Math.floor(Math.random()*r.R.length)].name})},[j.gameStarted]);let N=e=>{u(e),n(!1)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blackwood-900 via-blackwood-800 to-blackwood-900",children:[(0,a.jsx)("header",{className:"bg-blackwood-800/50 backdrop-blur-sm border-b border-gray-700 sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-white",children:"Blackwood Manor Investigation"}),(0,a.jsx)("div",{className:"hidden md:block text-sm text-gray-400",children:"Interactive Murder Mystery"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>t(!e),className:"hidden md:flex items-center px-3 py-2 text-sm text-gray-300 hover:text-white bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-colors",children:[(0,a.jsx)(z,{className:"w-4 h-4 mr-2"}),"Investigation"]}),(0,a.jsxs)("button",{onClick:()=>{confirm("Are you sure you want to reset the game? This will clear all progress.")&&(f(),t(!1),n(!1))},className:"flex items-center px-3 py-2 text-sm text-gray-300 hover:text-white bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-colors",children:[(0,a.jsx)(I,{className:"w-4 h-4 mr-2"}),"Reset"]}),(0,a.jsx)("button",{onClick:()=>n(!s),className:"md:hidden flex items-center px-3 py-2 text-sm text-gray-300 hover:text-white bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-colors",children:s?(0,a.jsx)(R.Z,{className:"w-4 h-4"}):(0,a.jsx)(z,{className:"w-4 h-4"})})]})]})})}),(0,a.jsxs)("div",{className:"flex h-[calc(100vh-4rem)]",children:[(0,a.jsx)("div",{className:"hidden md:block w-80 border-r border-gray-700 overflow-y-auto",children:(0,a.jsx)(c,{characters:r.R,selectedCharacter:o,onCharacterSelect:N,investigationProgress:j.investigationProgress})}),s&&(0,a.jsx)("div",{className:"md:hidden fixed inset-0 z-40 bg-black/50 backdrop-blur-sm",children:(0,a.jsx)(l.E.div,{initial:{opacity:0,x:-300},animate:{opacity:1,x:0},exit:{opacity:0,x:-300},className:"w-80 h-full bg-blackwood-800 border-r border-gray-700 overflow-y-auto",children:(0,a.jsx)(c,{characters:r.R,selectedCharacter:o,onCharacterSelect:N,investigationProgress:j.investigationProgress})})}),(0,a.jsx)("div",{className:"flex-1 flex flex-col",children:(0,a.jsxs)(T,{children:[(0,a.jsx)(y,{messages:d,characterName:null==o?void 0:o.name,characterAvatar:null==o?void 0:o.avatar,isTyping:x}),(0,a.jsx)(p,{onSendMessage:e=>{e.trim()&&e.length<=500&&g(e)},isTyping:x,disabled:!o||h,placeholder:o?"Ask ".concat(o.name," something..."):"Select a character to begin...",characterName:null==o?void 0:o.name})]})}),e&&(0,a.jsx)("div",{className:"hidden md:block w-80 border-l border-gray-700 overflow-y-auto",children:(0,a.jsx)(D,{investigationState:v,gameState:j,onAddNote:e=>P.a.getState().addInvestigationNote(e),onUpdateProgress:e=>P.a.getState().updateGameState({investigationProgress:e})})})]}),m&&(0,a.jsx)(l.E.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-4 right-4 bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg z-50",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:m}),(0,a.jsx)("button",{onClick:b,className:"text-white hover:text-gray-200",children:(0,a.jsx)(R.Z,{className:"w-4 h-4"})})]})}),e&&(0,a.jsx)("div",{className:"md:hidden fixed inset-0 z-40 bg-black/50 backdrop-blur-sm",children:(0,a.jsx)(l.E.div,{initial:{opacity:0,y:300},animate:{opacity:1,y:0},exit:{opacity:0,y:300},className:"absolute bottom-0 left-0 right-0 bg-blackwood-800 border-t border-gray-700 max-h-[50vh] overflow-y-auto",children:(0,a.jsx)(D,{investigationState:v,gameState:j,onAddNote:e=>P.a.getState().addInvestigationNote(e),onUpdateProgress:e=>P.a.getState().updateGameState({investigationProgress:e})})})})]})}}},function(e){e.O(0,[271,669,971,117,744],function(){return e(e.s=9240)}),_N_E=e.O()}]);